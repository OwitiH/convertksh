---
import Layout from '../layouts/Layout.astro';
import FAQSchema from '../components/FAQSchema.astro';

// SEO Metadata
const pageTitle = 'KES to TZS Converter | Kenya Shillings to Tanzania Shillings Exchange Rate Today';
const pageDescription = 'Convert Kenyan Shillings (KES) to Tanzanian Shillings (TZS) with live exchange rates. Get the best KES to TZS conversion rate today. Free, fast, and accurate currency calculator for Kenya and Tanzania.';
const canonicalUrl = '/kes-tzs';
const keywords = 'KES to TZS, Kenya Shillings to Tanzania Shillings, KES TZS exchange rate, convert KES to TZS, Kenya Tanzania currency converter, KES to TZS today, Tanzania Shilling to Kenya Shilling, KES TZS calculator, forex rates Kenya Tanzania, money transfer Kenya to Tanzania';

// FAQ Schema Data
const faqItems = [
  {
    question: 'What is the current KES to TZS exchange rate today?',
    answer: 'Our KES to TZS converter shows the live interbank exchange rate, which is updated every 5 minutes. The rate you see is the current market rate based on reliable financial data sources. For the most accurate rate for large transactions, check with your bank or money transfer service.'
  },
  {
    question: 'How do I convert Kenyan Shillings to Tanzanian Shillings?',
    answer: 'To convert KES to TZS: 1) Enter the amount in Kenyan Shillings, 2) Select KES as the "From" currency, 3) Select TZS as the "To" currency. The conversion happens automatically using the latest exchange rate. You can also use the switch button to quickly change between KES to TZS and TZS to KES conversions.'
  },
  {
    question: 'How often are the KES to TZS exchange rates updated?',
    answer: 'Our KES to TZS exchange rates are automatically updated every 5 minutes to ensure you get the most current market rates. You can also manually refresh the rates at any time by clicking the refresh button next to the rate display.'
  },
  {
    question: 'Is this KES to TZS converter free to use?',
    answer: 'Yes, our KES to TZS currency converter is completely free to use with no hidden charges. We don\'t charge any fees for using our conversion tool. However, if you\'re making an actual money transfer, the service you use (like banks or money transfer companies) may charge their own fees.'
  },
  {
    question: 'What is the best way to send money from Kenya to Tanzania?',
    answer: 'For sending money from Kenya to Tanzania, consider these options: 1) Digital money transfer services like WorldRemit or Wise often offer competitive rates, 2) Banks provide secure transfers but may have higher fees, 3) Mobile money services like M-Pesa to Tigo Pesa or M-Pesa, 4) Local forex bureaus for cash pickups. Always compare exchange rates and fees before making a transfer.'
  },
  {
    question: 'Why does the KES to TZS exchange rate change?',
    answer: 'The KES to TZS exchange rate fluctuates due to various economic factors including: 1) Supply and demand for each currency, 2) Economic indicators like inflation rates, 3) Interest rates set by central banks, 4) Political stability in both countries, 5) Trade balance between Kenya and Tanzania. These factors cause the exchange rate to change throughout the trading day.'
  },
  {
    question: 'Can I use this converter on my mobile phone?',
    answer: 'Yes, our KES to TZS converter is fully responsive and works perfectly on all mobile devices including smartphones and tablets. The interface automatically adjusts to your screen size, making it easy to convert currencies on the go. You can even add our website to your home screen for quick access.'
  },
  {
    question: 'Is there a limit to how much I can convert?',
    answer: 'Our online converter has no limits for currency conversion calculations. However, if you\'re making an actual money transfer, the service you choose (like banks or money transfer companies) may have their own limits on transaction amounts. Always check with your service provider for their specific limits and requirements.'
  }
];

// Structured Data
const structuredData = {
  "@context": "https://schema.org",
  "@type": "CurrencyConverter",
  "name": "KES to TZS Currency Converter",
  "description": pageDescription,
  "url": `https://convertksh.xyz${canonicalUrl}`,
  "keywords": keywords,
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": `https://convertksh.xyz${canonicalUrl}`
  },
  "publisher": {
    "@type": "Organization",
    "name": "Convert KSH",
    "url": "https://convertksh.xyz"
  },
  "inLanguage": "en",
  "about": ["Currency Exchange", "Foreign Exchange", "Money Transfer"],
  "audience": {
    "@type": "Audience",
    "name": "People needing to convert between Kenyan and Tanzanian currencies"
  },
  "countryOfOrigin": {
    "@type": "Country",
    "name": "Kenya"
  },
  "areaServed": ["Kenya", "Tanzania"],
  "potentialAction": {
    "@type": "SearchAction",
    "target": `https://convertksh.xyz/kes-tzs?q={search_term_string}`,
    "query-input": "required name=search_term_string"
  }
};
---

<Layout 
  title={pageTitle}
  description={pageDescription}
  canonicalUrl={canonicalUrl}
  structuredData={structuredData}
>
  <main class="bg-gray-900 text-white min-h-screen py-12 px-4">
    <div class="max-w-2xl mx-auto">
      <div class="text-center mb-10">
        <h1 class="text-4xl font-bold mb-3 text-emerald-400">KES to TZS Converter</h1>
        <p class="text-gray-300 max-w-2xl mx-auto">
          Convert between Kenyan Shillings (KES) and Tanzanian Shillings (TZS) with live, real-time exchange rates.
          Our free currency calculator helps you get the best rates for money transfers between Kenya and Tanzania.
        </p>
      </div>

      <div class="bg-gray-800 rounded-xl shadow-lg p-6 mb-8">
        <div class="flex flex-col space-y-4">
          {/* Amount Input */}
          <div>
            <label for="amount-input" class="block text-sm font-medium text-gray-300 mb-1">Amount</label>
            <div class="relative rounded-md shadow-sm">
              <input
                type="number"
                id="amount-input"
                class="bg-gray-700 text-white w-full p-3 rounded-lg border border-gray-600 focus:ring-2 focus:ring-emerald-500 focus:border-transparent"
                placeholder="0.00"
                min="0"
                step="0.01"
              />
            </div>
          </div>

          {/* Currency Selection */}
          <div class="grid grid-cols-12 gap-4 items-end">
            <div class="col-span-5">
              <label for="from-currency" class="block text-sm font-medium text-gray-300 mb-1">From</label>
              <select 
                id="from-currency"
                class="bg-gray-700 text-white w-full p-3 rounded-lg border border-gray-600 focus:ring-2 focus:ring-emerald-500 focus:border-transparent"
              >
                <option value="KES">Kenyan Shilling (KES)</option>
                <option value="TZS">Tanzanian Shilling (TZS)</option>
              </select>
            </div>
            
            <div class="col-span-2 flex justify-center">
              <button 
                id="switch-currencies" 
                class="p-2 bg-gray-700 hover:bg-gray-600 rounded-full text-gray-300 hover:text-white transition-colors"
                aria-label="Switch currencies"
              >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                </svg>
              </button>
            </div>
            
            <div class="col-span-5">
              <label for="to-currency" class="block text-sm font-medium text-gray-300 mb-1">To</label>
              <select 
                id="to-currency"
                class="bg-gray-700 text-white w-full p-3 rounded-lg border border-gray-600 focus:ring-2 focus:ring-emerald-500 focus:border-transparent"
              >
                <option value="TZS">Tanzanian Shilling (TZS)</option>
                <option value="KES">Kenyan Shilling (KES)</option>
              </select>
            </div>
          </div>

          {/* Result */}
          <div class="mt-6 p-4 bg-gray-700 rounded-lg">
            <div class="flex justify-between items-center">
              <div>
                <div class="text-sm text-gray-400">Exchange Rate</div>
                <div id="exchange-rate" class="text-lg font-medium">Loading...</div>
              </div>
              <div class="text-right">
                <div class="text-sm text-gray-400">Result</div>
                <div id="result" class="text-2xl font-bold text-emerald-400">-</div>
              </div>
            </div>
            <div class="mt-4 pt-4 border-t border-gray-600 flex justify-between items-center">
              <div id="last-updated" class="text-xs text-gray-400">Updating rates...</div>
              <button 
                id="refresh-rate" 
                class="flex items-center text-emerald-400 hover:text-emerald-300 text-sm font-medium"
              >
                <svg id="refresh-icon" xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                <svg id="loading-icon" class="hidden animate-spin h-4 w-4 mr-1 text-emerald-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Refresh Rates
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="prose prose-invert max-w-none mt-12">
        <h2 class="text-2xl font-bold mb-4">KES to TZS Exchange Rate Today</h2>
        <p class="mb-4">
          Our KES to TZS converter provides real-time exchange rates between the Kenyan Shilling (KES) and Tanzanian Shilling (TZS). 
          Whether you're traveling between Kenya and Tanzania, sending money to family, or conducting cross-border business, our tool 
          helps you get the most accurate conversion rates updated every 5 minutes.
        </p>
        
        <h3 class="text-xl font-semibold mt-6 mb-3">Why Convert KES to TZS?</h3>
        <p class="mb-4">
          The Kenyan Shilling (KES) and Tanzanian Shilling (TZS) are the official currencies of Kenya and Tanzania respectively. 
          With increasing trade and travel between these East African nations, having access to accurate currency conversion 
          is essential for:
        </p>
        <ul class="list-disc pl-5 mb-4 space-y-2">
          <li>Business transactions between Kenya and Tanzania</li>
          <li>Cross-border e-commerce and online shopping</li>
          <li>Money transfers to family and friends</li>
          <li>Travel and tourism expenses</li>
          <li>Investment and financial planning</li>
        </ul>

        <h3 class="text-xl font-semibold mt-6 mb-3">Understanding the Exchange Rate</h3>
        <p class="mb-4">
          The KES to TZS exchange rate represents how many Tanzanian Shillings you can get for one Kenyan Shilling. 
          This rate fluctuates constantly due to various economic factors including:
        </p>
        <ul class="list-disc pl-5 mb-4 space-y-2">
          <li>Interest rates set by the Central Bank of Kenya and Bank of Tanzania</li>
          <li>Inflation rates in both countries</li>
          <li>Economic stability and growth indicators</li>
          <li>Trade balances between Kenya and Tanzania</li>
          <li>Global currency market trends</li>
        </ul>

        <h3 class="text-xl font-semibold mt-6 mb-3">Tips for Getting the Best Exchange Rate</h3>
        <p class="mb-4">
          When converting KES to TZS or vice versa, consider these tips to get the best possible rate:
        </p>
        <ul class="list-disc pl-5 mb-4 space-y-2">
          <li>Compare rates from multiple sources before making large transactions</li>
          <li>Be aware of hidden fees that might be added to the exchange rate</li>
          <li>Consider using specialized money transfer services for better rates than traditional banks</li>
          <li>Monitor exchange rate trends to identify favorable times to convert your money</li>
          <li>For large transfers, consider using a forward contract to lock in a rate</li>
        </ul>

        <h3 class="text-xl font-semibold mt-6 mb-3">About the Kenyan Shilling (KES)</h3>
        <p class="mb-4">
          The Kenyan Shilling (KES) is the official currency of Kenya, issued by the Central Bank of Kenya. 
          It's divided into 100 cents and is one of the more stable currencies in East Africa. 
          The Kenyan economy is the largest in East Africa, with key sectors including agriculture, manufacturing, and services.
        </p>

        <h3 class="text-xl font-semibold mt-6 mb-3">About the Tanzanian Shilling (TZS)</h3>
        <p class="mb-4">
          The Tanzanian Shilling (TZS) is the official currency of Tanzania, issued by the Bank of Tanzania. 
          It's also divided into 100 cents. Tanzania has one of the fastest-growing economies in Africa, 
          with agriculture, mining, and tourism being key sectors.
        </p>
      </div>
    </div>
  </main>

  <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
  <script is:inline>
    document.addEventListener('DOMContentLoaded', () => {
      console.log('KES-TZS Converter: DOM fully loaded');
      
      const amountInput = document.getElementById('amount-input');
      const fromCurrency = document.getElementById('from-currency');
      const toCurrency = document.getElementById('to-currency');
      const resultDisplay = document.getElementById('result');
      const exchangeRateDisplay = document.getElementById('exchange-rate');
      const refreshButton = document.getElementById('refresh-rate');
      const lastUpdatedDisplay = document.getElementById('last-updated');
      const switchButton = document.getElementById('switch-currencies');

      // Debug log all found elements
      console.log('Found elements:', {
        amountInput: !!amountInput,
        fromCurrency: !!fromCurrency,
        toCurrency: !!toCurrency,
        resultDisplay: !!resultDisplay,
        exchangeRateDisplay: !!exchangeRateDisplay,
        refreshButton: !!refreshButton,
        lastUpdatedDisplay: !!lastUpdatedDisplay,
        switchButton: !!switchButton
      });

      if (!amountInput || !fromCurrency || !toCurrency || !resultDisplay || !exchangeRateDisplay || !refreshButton || !switchButton) {
        console.error('KES-TZS Converter: One or more required DOM elements are missing.');
        return;
      }

      let exchangeRate = null;
      const CURRENCIES = {
        'KES': 'Kenyan Shilling',
        'TZS': 'Tanzanian Shilling'
      };

      async function fetchRateAndConvert() {
        try {
          // Show loading state
          refreshButton.disabled = true;
          document.getElementById('refresh-icon').classList.add('hidden');
          document.getElementById('loading-icon').classList.remove('hidden');
          
          // Using the same API but for TZS
          const response = await fetch('https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/kes.json');
          if (!response.ok) throw new Error('Network response was not ok');
          
          const data = await response.json();
          console.log('API Response:', data);
          
          if (data.kes && data.kes.tzs) {
            exchangeRate = data.kes.tzs;
            updateRateDisplay();
            lastUpdatedDisplay.textContent = `Last updated: ${new Date().toLocaleTimeString()}`;
            updateConversion();
          } else {
            throw new Error('Invalid data from API');
          }
        } catch (error) {
          console.error('Failed to fetch exchange rate:', error);
          exchangeRateDisplay.textContent = 'Error fetching rate. Try refreshing.';
          resultDisplay.textContent = 'Error';
          
          // Fallback to a default rate if API fails
          exchangeRate = 15.50; // Example fallback rate: 1 KES = 15.50 TZS
          lastUpdatedDisplay.textContent = 'Using fallback rate. Last update: ' + new Date().toLocaleTimeString();
          updateRateDisplay();
          updateConversion();
        } finally {
          // Reset loading state
          refreshButton.disabled = false;
          document.getElementById('refresh-icon').classList.remove('hidden');
          document.getElementById('loading-icon').classList.add('hidden');
        }
      }

      function updateRateDisplay() {
        if (exchangeRate === null) return;
        const from = fromCurrency.value;
        const to = toCurrency.value;
        
        if (from === 'KES' && to === 'TZS') {
          exchangeRateDisplay.textContent = `1 ${from} = ${exchangeRate.toFixed(2)} ${to}`;
        } else if (from === 'TZS' && to === 'KES') {
          exchangeRateDisplay.textContent = `1 ${from} = ${(1 / exchangeRate).toFixed(6)} ${to}`;
        }
      }

      function updateConversion() {
        if (exchangeRate === null) return;

        // If input is empty, clear the result
        if (!amountInput.value.trim()) {
          resultDisplay.textContent = '-';
          return;
        }

        const amount = parseFloat(amountInput.value);
        
        // If not a valid number, show error
        if (isNaN(amount) || amount < 0) {
          resultDisplay.textContent = 'Invalid amount';
          return;
        }
        
        let result;
        
        if (fromCurrency.value === 'KES' && toCurrency.value === 'TZS') {
          result = amount * exchangeRate;
        } else if (fromCurrency.value === 'TZS' && toCurrency.value === 'KES') {
          result = amount / exchangeRate;
        } else {
          result = amount; // Same currency
        }

        resultDisplay.textContent = `${result.toLocaleString('en-US', { 
          minimumFractionDigits: 2, 
          maximumFractionDigits: 2 
        })} ${toCurrency.value}`;
      }

      function switchCurrencies() {
        const temp = fromCurrency.value;
        fromCurrency.value = toCurrency.value;
        toCurrency.value = temp;
        
        if (exchangeRate !== null) {
          updateRateDisplay();
          updateConversion();
        }
      }

      // Event Listeners
      amountInput.addEventListener('input', updateConversion);
      fromCurrency.addEventListener('change', () => {
        updateRateDisplay();
        updateConversion();
      });
      toCurrency.addEventListener('change', () => {
        updateRateDisplay();
        updateConversion();
      });
      refreshButton.addEventListener('click', fetchRateAndConvert);
      switchButton.addEventListener('click', switchCurrencies);

      // Initial fetch
      fetchRateAndConvert();

      // Auto-refresh every 5 minutes (300000 ms)
      setInterval(fetchRateAndConvert, 300000);
      
      // Test function to verify script is working
      window.testKesTzsConverter = function() {
        console.log('KES-TZS Converter: Test function called');
        return {
          version: '1.0.0',
          status: 'working',
          elementsFound: {
            amountInput: !!amountInput,
            fromCurrency: !!fromCurrency,
            toCurrency: !!toCurrency,
            resultDisplay: !!resultDisplay,
            exchangeRateDisplay: !!exchangeRateDisplay,
            refreshButton: !!refreshButton,
            lastUpdatedDisplay: !!lastUpdatedDisplay,
            switchButton: !!switchButton
          }
        };
      };
      
      console.log('KES-TZS Converter: Test function available as window.testKesTzsConverter()');
    });
  </script>
  
  <FAQSchema faqItems={faqItems} />
</Layout>
